FROM xnat/metlab:demo.20180522.1

COPY run.sh /usr/local/scripts
COPY create-radiomics-assessor.py /usr/local/scripts
LABEL org.nrg.commands="[{\"inputs\": [{\"required\": true, \"type\": \"string\", \"name\": \"PROJECT\", \"description\": \"The project\"}, {\"required\": true, \"type\": \"string\", \"name\": \"SUBJECT\", \"description\": \"Label or ID of the subject\"}, {\"required\": true, \"type\": \"string\", \"name\": \"SESSION_ID\", \"description\": \"ID of the session\"}, {\"required\": true, \"type\": \"string\", \"name\": \"SESSION_LABEL\", \"description\": \"Label of the session\"}], \"working-directory\": \"/scratch\", \"name\": \"metlab\", \"command-line\": \"run.sh #PROJECT# #SUBJECT# #SESSION_ID# #SESSION_LABEL#\", \"outputs\": [], \"version\": \"1.0\", \"schema-version\": \"1.0\", \"xnat\": [{\"derived-inputs\": [{\"provides-value-for-command-input\": \"SESSION_ID\", \"derived-from-wrapper-input\": \"session\", \"type\": \"string\", \"name\": \"session-id\", \"derived-from-xnat-object-property\": \"id\"}, {\"provides-value-for-command-input\": \"SESSION_LABEL\", \"derived-from-wrapper-input\": \"session\", \"type\": \"string\", \"name\": \"session-label\", \"derived-from-xnat-object-property\": \"label\"}, {\"provides-value-for-command-input\": \"SUBJECT\", \"derived-from-wrapper-input\": \"session\", \"type\": \"string\", \"name\": \"subject-id\", \"derived-from-xnat-object-property\": \"subject-id\"}, {\"provides-value-for-command-input\": \"PROJECT\", \"derived-from-wrapper-input\": \"session\", \"type\": \"string\", \"name\": \"project\", \"derived-from-xnat-object-property\": \"project-id\"}], \"contexts\": [\"xnat:imageSessionData\"], \"description\": \"Run metlab from a session\", \"output-handlers\": [], \"external-inputs\": [{\"load-children\": false, \"required\": true, \"type\": \"Session\", \"name\": \"session\", \"description\": \"Input session. Must have a Gamma-Knife scan and an RT-STRUCT in a scan or an ROI Collection assessor resource.\"}], \"name\": \"metlab\"}, {\"derived-inputs\": [{\"load-children\": false, \"derived-from-wrapper-input\": \"assessor\", \"type\": \"Session\", \"name\": \"session\"}, {\"provides-value-for-command-input\": \"SESSION_ID\", \"derived-from-wrapper-input\": \"session\", \"type\": \"string\", \"name\": \"session-id\", \"derived-from-xnat-object-property\": \"id\"}, {\"provides-value-for-command-input\": \"SESSION_LABEL\", \"derived-from-wrapper-input\": \"session\", \"type\": \"string\", \"name\": \"session-label\", \"derived-from-xnat-object-property\": \"label\"}, {\"provides-value-for-command-input\": \"SUBJECT\", \"derived-from-wrapper-input\": \"session\", \"type\": \"string\", \"name\": \"subject-id\", \"derived-from-xnat-object-property\": \"subject-id\"}, {\"provides-value-for-command-input\": \"PROJECT\", \"derived-from-wrapper-input\": \"session\", \"type\": \"string\", \"name\": \"project\", \"derived-from-xnat-object-property\": \"project-id\"}], \"contexts\": [\"icr:roiCollectionData\"], \"description\": \"Run metlab from an ROI Collection assessor\", \"output-handlers\": [], \"external-inputs\": [{\"load-children\": false, \"required\": true, \"type\": \"Assessor\", \"name\": \"assessor\", \"description\": \"Input assessor. Must have RT-STRUCT resource. Parent session must have a Gamma-Knife scan.\"}], \"name\": \"metlab-from-roi-collection\"}], \"mounts\": [{\"writable\": \"true\", \"path\": \"/scratch\", \"name\": \"scratch\"}], \"type\": \"docker\", \"description\": \"Runs metlab and uploads lesion assessors\"}]"
